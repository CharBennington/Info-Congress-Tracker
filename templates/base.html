{% if not request.headers.get("HX-Request") %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Congress Tracker</title>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<script>
    // Load URL with fade-out then htmx ajax swap
    function loadWithFade(url) {
      const main = document.getElementById('main');
      if (!main) {
        // fallback to normal navigation if #main missing
        window.location.href = url;
        return;
      }
  
      // start fade-out
      main.classList.add('fade-out');
  
      // wait for fade-out to finish, then request and swap
      setTimeout(() => {
        // htmx will replace innerHTML of target
        htmx.ajax('GET', url, { target: '#main', swap: 'innerHTML', pushUrl: true });
      }, 180); // match this to your CSS duration (180-220ms)
    }
  
    // After htmx swaps new content, fade it in
    document.addEventListener('htmx:afterSwap', function(evt) {
      // safe: always target the #main element we control
      const main = document.getElementById('main');
      if (!main) return;
  
      // remove any lingering fade-out, add fade-in
      main.classList.remove('fade-out');
      main.classList.add('fade-in');
  
      // remove fade-in class after animation so it can run again next time
      setTimeout(() => main.classList.remove('fade-in'), 300);
    });
</script>
<body>
<nav>
    <div class="flag">
        <img src="/static/{{country}}.png" alt="{{country}} Flag">
    </div>
    <div class="logo">
        <a href="/" onclick="event.preventDefault(); loadWithFade('/');"><img src="/static/banner1.png" alt="Congress Tracker"></a>
    </div>
    <div class="nav-container">
        <ul class="nav-links">
            <li><a href="#">Legislative Activity</a></li>
            <li><a href="#">Transparency</a></li>
            <li><a href="#">Voting</a></li>
            <li><a href="/about" onclick="event.preventDefault(); loadWithFade('/about');">About</a></li>
        </ul>
    </div>
    <form class="search-form" action="/search" method="GET">
        <input type="text" name="q" placeholder="country, bill, or keyword" />
        <button type="submit" aria-label="Search">
            üîç
          </button>
          
    </form>
</nav>


<main id="main">
    {% endif %}
    
        {% block content %}{% endblock %}
    
    {% if not request.headers.get("HX-Request") %}
    </main>
</body>
</html>
{% endif %}
    